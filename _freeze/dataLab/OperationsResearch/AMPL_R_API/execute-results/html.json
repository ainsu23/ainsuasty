{
  "hash": "3fa89032d180eaec5bc262f33fe7ba28",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AMPL R API\"\nsubtitle: \"Operations Research\"\ncategories: [\"Prescriptive Analytics\", \"AMPL\", \"MIP\"]\nimage: ../../image/AMPL_Free.PNG\ncomments: \n  utterances: \n    repo: ainsu23/ainsuasty_quarto\nformat: \n  html:\n    css: css/blogs.css\nexecute: \n  cache: true\n---\n\n\nHave you ever asked, How to optimize your commercial process with Mathematical\nOptimization (field: Operations Research)?\n\nOperations Research is an old field that have had improved many industries around\nthe world with the use of mathematics, it helps to model a real problem with\nan objective function and constrains associated to it.\n\nIn this post, I would show how you can run an optimization problem from R using\nthe integration with AMPL (Optimization software). To get more details about this\nintegration, please follow this [link](https://rampl.readthedocs.io/en/latest/index.html)\n\n## Libraries\nIn order to install `rAMPL` it is important to have the lastest version of RTools\ninstalled.\n[**Getting started** session from AMPL webiste.](https://rampl.readthedocs.io/en/latest/getting-started.html)\n\nAs long as , used `renv` for building my blog I use the following code:\n\n::: {.cell}\n\n```{.r .cell-code}\nrenv::install(\"Rcpp\", type=\"source\")\nrenv::install(\"https://ampl.com/dl/API/rAMPL.tar.gz\", repos=NULL, INSTALL_opts=c(\"--no-multiarch\", \"--no-staged-install\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rAMPL)\nlibrary(dplyr)\nlibrary(DT)\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n\n## rAMPL manage Class structure \n\nThe idea behind this package is to manage the optimization problem as an instance \nof a class. \n\nThat means a variable with the content of the class needs to be created. This object\nwill contains the structure of the problem, each time the user need to introduces  \ninformation. For example: the optimization formulation is build in the `eval` method\nor loaded from a `.mod` file.\n\nIn case you struggle with this concept of classes, you can check the post\n[Data Structures with R6Class](../Blog/data_structures.qmd)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# env <- new(Environment, \"full path to the AMPL installation directory\")\nampl <- new(AMPL, env)\nampl$setOption(\"solver\",\"HiGHS\") \nampl$eval(\"var x;\")\nampl$eval(\"maximize z: x;\")\nampl$eval(\"subject to c: x<=10;\")\n\nx <- ampl$getVariable(\"x\")\n\nampl$solve()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nHiGHS 1.7.0: \b\b\b\b\b\b\b\b\b\b\b\b\bHiGHS 1.7.0: optimal solution; objective 10\n0 simplex iterations\n0 barrier iterations\n```\n\n\n:::\n\n```{.r .cell-code}\n#\n# # At this point x$value() evaluates to 10\nprint(x$value())  # prints 10\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 10\n```\n\n\n:::\n\n```{.r .cell-code}\nampl$close()\n```\n:::\n\n\n## Assign clients to commercials\nIn a previous job, I worked as the responsible of commercials campaigns and one \ntask was to assign the clients to the commercials having into account some \nconstrains; such as: \n\n  1.   Monthly capacity by hierarchy\n  2.   One client had to be attended by one salesperson \n  3.   One commercial with XX knowledge could not attend one client that would \n  requires attention on KK.\n\nThis task was done with excel creating pivot tables and crossing them and counting manually \nwhich client was assigned and tried to reach the capacity constrain. Nevertheless, \nthis problem is a classic problem to be solved with operations research.\n\n### Parameters\n\n::: {.cell}\n\n```{.r .cell-code}\nn_clients <- 84\nn_commercials <- 4\nn_campaigns <- 4\nn_rol <- 3\n```\n:::\n\n\n### Data\nThe data used was generated using R and stored in dataframes. AMPL can read\ndataframes, so it is not need of having the data vectorized, as for example,\nin `ompr package`.\n\n::: {.panel-tabset}\n\n## Commercial\n\nThis table has the list of workers in sales. For each person, contains the rol,\nthe conversion_rate (average), and capacity in the month.\n\n::: {.cell}\n\n```{.r .cell-code}\ncommercials <- data.frame(\n  \"seller_id\" = sample(1:n_commercials, replace = FALSE),\n  \"rol\" = 1:n_commercials %>% \n      purrr::map(function(x){\n        sample(LETTERS[1:n_rol],1,replace = TRUE)\n      }) %>% \n    unlist(),\n  \"convertion_rate\" = sample(20:100, n_commercials, replace = FALSE) / 100\n  ) %>% \n  left_join(\n    data.frame(\n      \"rol\" = LETTERS[1:n_rol],\n      \"capacity\" = 1:n_rol %>% \n          purrr::map(function(x){\n            sample(10:20,1,replace = FALSE)\n          }) %>% \n        unlist()\n    ),\n    by = \"rol\"\n    )\ncommercials %>% arrange(seller_id) %>% DT::datatable()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-826af7857d0935f5182e\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-826af7857d0935f5182e\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\"],[1,2,3,4],[\"C\",\"B\",\"C\",\"A\"],[0.78,0.88,0.91,0.64],[10,10,10,13]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>seller_id<\\/th>\\n      <th>rol<\\/th>\\n      <th>convertion_rate<\\/th>\\n      <th>capacity<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,3,4]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"seller_id\",\"targets\":1},{\"name\":\"rol\",\"targets\":2},{\"name\":\"convertion_rate\",\"targets\":3},{\"name\":\"capacity\",\"targets\":4}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Clients\n\nThis table has the list of clients and campaigns to be offer.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclients <- data.frame(\n  \"client_id\" = sample(1:n_clients,replace = FALSE),\n  \"campaign\" = 1 %>% purrr::map(function(x){\n    paste(\"campaign_\",sample(1:n_campaigns, n_clients, replace = TRUE),sep = \"\")\n  }) %>% unlist()\n) %>% \n  left_join(\n    data.frame(\n      \"campaign\" = paste0(\"campaign_\", sample(1:n_campaigns, n_campaigns, replace = FALSE)),\n      \"benefit\" = 1:n_campaigns %>% \n          purrr::map(function(x){\n            sample(100:1000, 1, replace = FALSE)\n          }) %>% \n        unlist()\n    ),\n    by = \"campaign\"\n  )\nclients %>% arrange(client_id) %>% DT::datatable()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-6688143b8a8d1ac253a9\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-6688143b8a8d1ac253a9\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"60\",\"61\",\"62\",\"63\",\"64\",\"65\",\"66\",\"67\",\"68\",\"69\",\"70\",\"71\",\"72\",\"73\",\"74\",\"75\",\"76\",\"77\",\"78\",\"79\",\"80\",\"81\",\"82\",\"83\",\"84\"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],[\"campaign_4\",\"campaign_1\",\"campaign_2\",\"campaign_4\",\"campaign_2\",\"campaign_4\",\"campaign_2\",\"campaign_3\",\"campaign_1\",\"campaign_1\",\"campaign_2\",\"campaign_1\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_1\",\"campaign_3\",\"campaign_1\",\"campaign_4\",\"campaign_1\",\"campaign_1\",\"campaign_3\",\"campaign_2\",\"campaign_1\",\"campaign_4\",\"campaign_2\",\"campaign_1\",\"campaign_4\",\"campaign_3\",\"campaign_4\",\"campaign_1\",\"campaign_4\",\"campaign_4\",\"campaign_2\",\"campaign_2\",\"campaign_3\",\"campaign_1\",\"campaign_3\",\"campaign_4\",\"campaign_2\",\"campaign_4\",\"campaign_4\",\"campaign_4\",\"campaign_3\",\"campaign_4\",\"campaign_1\",\"campaign_3\",\"campaign_1\",\"campaign_2\",\"campaign_2\",\"campaign_2\",\"campaign_4\",\"campaign_3\",\"campaign_2\",\"campaign_4\",\"campaign_3\",\"campaign_2\",\"campaign_3\",\"campaign_4\",\"campaign_2\",\"campaign_3\",\"campaign_1\",\"campaign_3\",\"campaign_1\",\"campaign_2\",\"campaign_1\",\"campaign_2\",\"campaign_4\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_2\",\"campaign_1\",\"campaign_2\",\"campaign_3\",\"campaign_2\",\"campaign_3\",\"campaign_2\",\"campaign_3\",\"campaign_2\",\"campaign_3\",\"campaign_2\"],[260,289,761,260,761,260,761,556,289,289,761,289,556,556,556,761,289,556,289,260,289,289,556,761,289,260,761,289,260,556,260,289,260,260,761,761,556,289,556,260,761,260,260,260,556,260,289,556,289,761,761,761,260,556,761,260,556,761,556,260,761,556,289,556,289,761,289,761,260,556,556,556,761,761,289,761,556,761,556,761,556,761,556,761]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>client_id<\\/th>\\n      <th>campaign<\\/th>\\n      <th>benefit<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,3]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"client_id\",\"targets\":1},{\"name\":\"campaign\",\"targets\":2},{\"name\":\"benefit\",\"targets\":3}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Campaigns\n\nThis table has which role can attend each campaign.\n\n::: {.cell}\n\n```{.r .cell-code}\ncampaigns <- data.frame(\n  \"campaign\" = paste(\"campaign_\",1:n_campaigns,sep = \"\"),\n  \"rol\" = 1:(n_campaigns) %>% purrr::map(function(x){\n    sample(LETTERS[1:n_rol],1,replace = TRUE)\n  }) %>% unlist()\n) %>% distinct()\n\ncampaigns %>% arrange(rol) %>% DT::datatable()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-757100e97d5feb295fc4\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-757100e97d5feb295fc4\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\"],[\"campaign_1\",\"campaign_2\",\"campaign_4\",\"campaign_3\"],[\"A\",\"A\",\"A\",\"C\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>campaign<\\/th>\\n      <th>rol<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"campaign\",\"targets\":1},{\"name\":\"rol\",\"targets\":2}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Joined tables\n\nFinally, the previous tables are joined to check data before start modelling.\n\n::: {.cell}\n\n```{.r .cell-code}\nfinnal <- clients %>% \n  left_join(campaigns, by = \"campaign\") %>% \n  left_join(commercials, by = \"rol\") %>% \n  mutate(benefit = benefit * convertion_rate)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in left_join(., commercials, by = \"rol\"): Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 4 of `x` matches multiple rows in `y`.\nℹ Row 2 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n```\n\n\n:::\n\n```{.r .cell-code}\nfinnal %>% DT::datatable(filter = 'top')\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-328bc3bb90f1f01e19df\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-328bc3bb90f1f01e19df\">{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"integer\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"84\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"166.4\\\" data-max=\\\"505.96\\\" data-scale=\\\"13\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"integer\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"4\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0.64\\\" data-max=\\\"0.91\\\" data-scale=\\\"2\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"integer\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"10\\\" data-max=\\\"13\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"60\",\"61\",\"62\",\"63\",\"64\",\"65\",\"66\",\"67\",\"68\",\"69\",\"70\",\"71\",\"72\",\"73\",\"74\",\"75\",\"76\",\"77\",\"78\",\"79\",\"80\",\"81\",\"82\",\"83\",\"84\",\"85\",\"86\",\"87\",\"88\",\"89\",\"90\",\"91\",\"92\",\"93\",\"94\",\"95\",\"96\",\"97\",\"98\",\"99\",\"100\",\"101\",\"102\",\"103\",\"104\",\"105\",\"106\",\"107\"],[3,6,10,54,54,25,47,9,21,60,11,14,14,27,67,42,1,71,71,51,12,76,17,50,49,31,26,32,83,83,81,81,40,82,38,75,52,37,37,66,63,41,65,19,69,59,59,43,29,39,39,58,79,79,30,30,84,18,18,16,5,22,45,45,77,77,55,44,24,4,72,72,7,70,70,20,53,62,62,28,61,2,57,57,15,15,23,23,46,74,73,78,68,56,48,48,13,13,35,64,64,34,8,8,33,36,80],[\"campaign_2\",\"campaign_4\",\"campaign_1\",\"campaign_3\",\"campaign_3\",\"campaign_1\",\"campaign_1\",\"campaign_1\",\"campaign_1\",\"campaign_4\",\"campaign_2\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_1\",\"campaign_4\",\"campaign_4\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_1\",\"campaign_2\",\"campaign_1\",\"campaign_2\",\"campaign_1\",\"campaign_4\",\"campaign_4\",\"campaign_1\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_4\",\"campaign_2\",\"campaign_1\",\"campaign_1\",\"campaign_2\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_1\",\"campaign_2\",\"campaign_1\",\"campaign_1\",\"campaign_4\",\"campaign_3\",\"campaign_3\",\"campaign_4\",\"campaign_4\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_2\",\"campaign_1\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_4\",\"campaign_2\",\"campaign_4\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_3\",\"campaign_3\",\"campaign_4\",\"campaign_4\",\"campaign_3\",\"campaign_3\",\"campaign_1\",\"campaign_2\",\"campaign_1\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_4\",\"campaign_2\",\"campaign_2\",\"campaign_2\",\"campaign_2\",\"campaign_4\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_3\",\"campaign_2\",\"campaign_3\",\"campaign_3\",\"campaign_4\",\"campaign_3\",\"campaign_3\",\"campaign_4\",\"campaign_2\",\"campaign_2\"],[487.04,166.4,184.96,433.68,505.96,184.96,184.96,184.96,184.96,166.4,487.04,433.68,505.96,487.04,184.96,166.4,166.4,433.68,505.96,487.04,184.96,487.04,184.96,487.04,184.96,166.4,166.4,184.96,433.68,505.96,433.68,505.96,166.4,487.04,184.96,184.96,487.04,433.68,505.96,487.04,184.96,487.04,184.96,184.96,166.4,433.68,505.96,166.4,166.4,433.68,505.96,487.04,433.68,505.96,433.68,505.96,487.04,433.68,505.96,487.04,487.04,184.96,433.68,505.96,433.68,505.96,487.04,166.4,487.04,166.4,433.68,505.96,487.04,433.68,505.96,166.4,166.4,433.68,505.96,184.96,487.04,184.96,433.68,505.96,433.68,505.96,433.68,505.96,166.4,487.04,487.04,487.04,487.04,166.4,433.68,505.96,433.68,505.96,487.04,433.68,505.96,166.4,433.68,505.96,166.4,487.04,487.04],[\"A\",\"A\",\"A\",\"C\",\"C\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"C\",\"C\",\"A\",\"A\",\"A\",\"A\",\"C\",\"C\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"C\",\"C\",\"C\",\"C\",\"A\",\"A\",\"A\",\"A\",\"A\",\"C\",\"C\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"C\",\"C\",\"A\",\"A\",\"C\",\"C\",\"A\",\"C\",\"C\",\"C\",\"C\",\"A\",\"C\",\"C\",\"A\",\"A\",\"A\",\"C\",\"C\",\"C\",\"C\",\"A\",\"A\",\"A\",\"A\",\"C\",\"C\",\"A\",\"C\",\"C\",\"A\",\"A\",\"C\",\"C\",\"A\",\"A\",\"A\",\"C\",\"C\",\"C\",\"C\",\"C\",\"C\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"C\",\"C\",\"C\",\"C\",\"A\",\"C\",\"C\",\"A\",\"C\",\"C\",\"A\",\"A\",\"A\"],[4,4,4,1,3,4,4,4,4,4,4,1,3,4,4,4,4,1,3,4,4,4,4,4,4,4,4,4,1,3,1,3,4,4,4,4,4,1,3,4,4,4,4,4,4,1,3,4,4,1,3,4,1,3,1,3,4,1,3,4,4,4,1,3,1,3,4,4,4,4,1,3,4,1,3,4,4,1,3,4,4,4,1,3,1,3,1,3,4,4,4,4,4,4,1,3,1,3,4,1,3,4,1,3,4,4,4],[0.64,0.64,0.64,0.78,0.91,0.64,0.64,0.64,0.64,0.64,0.64,0.78,0.91,0.64,0.64,0.64,0.64,0.78,0.91,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.64,0.78,0.91,0.78,0.91,0.64,0.64,0.64,0.64,0.64,0.78,0.91,0.64,0.64,0.64,0.64,0.64,0.64,0.78,0.91,0.64,0.64,0.78,0.91,0.64,0.78,0.91,0.78,0.91,0.64,0.78,0.91,0.64,0.64,0.64,0.78,0.91,0.78,0.91,0.64,0.64,0.64,0.64,0.78,0.91,0.64,0.78,0.91,0.64,0.64,0.78,0.91,0.64,0.64,0.64,0.78,0.91,0.78,0.91,0.78,0.91,0.64,0.64,0.64,0.64,0.64,0.64,0.78,0.91,0.78,0.91,0.64,0.78,0.91,0.64,0.78,0.91,0.64,0.64,0.64],[13,13,13,10,10,13,13,13,13,13,13,10,10,13,13,13,13,10,10,13,13,13,13,13,13,13,13,13,10,10,10,10,13,13,13,13,13,10,10,13,13,13,13,13,13,10,10,13,13,10,10,13,10,10,10,10,13,10,10,13,13,13,10,10,10,10,13,13,13,13,10,10,13,10,10,13,13,10,10,13,13,13,10,10,10,10,10,10,13,13,13,13,13,13,10,10,10,10,13,10,10,13,10,10,13,13,13]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>client_id<\\/th>\\n      <th>campaign<\\/th>\\n      <th>benefit<\\/th>\\n      <th>rol<\\/th>\\n      <th>seller_id<\\/th>\\n      <th>convertion_rate<\\/th>\\n      <th>capacity<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,3,5,6,7]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"client_id\",\"targets\":1},{\"name\":\"campaign\",\"targets\":2},{\"name\":\"benefit\",\"targets\":3},{\"name\":\"rol\",\"targets\":4},{\"name\":\"seller_id\",\"targets\":5},{\"name\":\"convertion_rate\",\"targets\":6},{\"name\":\"capacity\",\"targets\":7}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n:::\n\n### Model\n\nNow it is time to model, it is a good practice (even in AMPL) to have the .model,\n.data and .run files separated in one folder. As I build here the data, I just \ncreate the data as vectors for sets or scalar parameters or dataframes for tables\n\n::: {.panel-tabset}\n\n## Model run in R\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Build data to pass AMPL Model\n\n### sets\nClients <- distinct(finnal, client_id)[,1]\nCommercials <- distinct(finnal, seller_id)[,1]\n### paramets associated to commercial\ncapacities <- distinct(finnal, seller_id, capacity)[,2]\n### parameter associated to client and commercial\nbenefit <- select(finnal, client_id, seller_id, benefit) %>% \n  tidyr::pivot_wider(names_from = seller_id, values_from = benefit) %>% \n  mutate(across(where(is.numeric), ~tidyr::replace_na(.x, 1))) %>% \n  tidyr::pivot_longer(!client_id, names_to = \"seller_id\", values_to = \"benefit\") %>% \n  mutate(seller_id = as.numeric(seller_id))\n\n## .run \nampl <- new(AMPL, env) # Create class ampl\n\n# Setting solver to be used. Due to limit license (max 300 vars or contrains), \n# I change to HiGHS solver, allowed with AMPL CE..\n# an open source solver.\nampl$setOption(\"solver\",\"HiGHS\") \n\n#reading model written in .mod file (AMPL)\nampl$read(\"models/assign.mod\") # Read model located in folder models\n\n# Defines sets data and parameters.\n\nampl$setData(data.frame(Clients = Clients), 1, \"Clients\") \nampl$setData(\n  data.frame(Commercials = Commercials, capacity = capacities), \n  1, \n  \"Commercials\"\n)\nampl$setData(benefit, 2, \"\")\n\nampl$solve()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nHiGHS 1.7.0: \b\b\b\b\b\b\b\b\b\b\b\b\bHiGHS 1.7.0: optimal solution; objective 15727.92\n10 simplex iterations\n1 branching nodes\n```\n\n\n:::\n\n```{.r .cell-code}\n## Get objective solution\ncat(sprintf(\"Objective: %f\\n\", ampl$getObjective(\"Profit\")$value()))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nObjective: 15727.920000\n```\n\n\n:::\n\n```{.r .cell-code}\n# Get the values of the variable assign in a data.frame\ndf <- ampl$getVariable(\"assign\")$getValues()\n\ndf <- df %>% \n  rename(\n    seller_id = index1,\n    client_id = index0,\n    solution = assign.val\n  ) %>% \n  mutate(solution = round(solution))\n\nampl$close()\n```\n:::\n\n\n## AMPL .mod\n\nContains the formulation of the problem written in `AMPL language`.\n\n```{{AMPL}}\n\nset Clients;\nset Commercials;\n\nparam capacity {Commercials} > 0;\nparam benefit {Clients, Commercials} >= 0;\n\nvar assign {Clients, Commercials} binary;\n\nmaximize Profit:\n  sum {i in Clients, j in Commercials} benefit[i,j] * assign[i,j];\n  \nsubject to Supply {i in Clients}:\n  sum {j in Commercials} assign[i,j] <= 1;\nsubject to capacity_constrain {j in Commercials}:\n  sum {i in Clients} assign[i,j] <= capacity[j];\n```\n:::\n\n::: {.panel-tabset}\n\n## Solution\n:::{.callout-note}\nSome clients were not assigned due to capacity of the sales force.\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  DT::datatable(filter = 'top')\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-053a35e7c9a50a7f73e4\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-053a35e7c9a50a7f73e4\">{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"84\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"4\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0\\\" data-max=\\\"1\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"60\",\"61\",\"62\",\"63\",\"64\",\"65\",\"66\",\"67\",\"68\",\"69\",\"70\",\"71\",\"72\",\"73\",\"74\",\"75\",\"76\",\"77\",\"78\",\"79\",\"80\",\"81\",\"82\",\"83\",\"84\",\"85\",\"86\",\"87\",\"88\",\"89\",\"90\",\"91\",\"92\",\"93\",\"94\",\"95\",\"96\",\"97\",\"98\",\"99\",\"100\",\"101\",\"102\",\"103\",\"104\",\"105\",\"106\",\"107\",\"108\",\"109\",\"110\",\"111\",\"112\",\"113\",\"114\",\"115\",\"116\",\"117\",\"118\",\"119\",\"120\",\"121\",\"122\",\"123\",\"124\",\"125\",\"126\",\"127\",\"128\",\"129\",\"130\",\"131\",\"132\",\"133\",\"134\",\"135\",\"136\",\"137\",\"138\",\"139\",\"140\",\"141\",\"142\",\"143\",\"144\",\"145\",\"146\",\"147\",\"148\",\"149\",\"150\",\"151\",\"152\",\"153\",\"154\",\"155\",\"156\",\"157\",\"158\",\"159\",\"160\",\"161\",\"162\",\"163\",\"164\",\"165\",\"166\",\"167\",\"168\",\"169\",\"170\",\"171\",\"172\",\"173\",\"174\",\"175\",\"176\",\"177\",\"178\",\"179\",\"180\",\"181\",\"182\",\"183\",\"184\",\"185\",\"186\",\"187\",\"188\",\"189\",\"190\",\"191\",\"192\",\"193\",\"194\",\"195\",\"196\",\"197\",\"198\",\"199\",\"200\",\"201\",\"202\",\"203\",\"204\",\"205\",\"206\",\"207\",\"208\",\"209\",\"210\",\"211\",\"212\",\"213\",\"214\",\"215\",\"216\",\"217\",\"218\",\"219\",\"220\",\"221\",\"222\",\"223\",\"224\",\"225\",\"226\",\"227\",\"228\",\"229\",\"230\",\"231\",\"232\",\"233\",\"234\",\"235\",\"236\",\"237\",\"238\",\"239\",\"240\",\"241\",\"242\",\"243\",\"244\",\"245\",\"246\",\"247\",\"248\",\"249\",\"250\",\"251\",\"252\"],[1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29,30,30,30,31,31,31,32,32,32,33,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,39,39,39,40,40,40,41,41,41,42,42,42,43,43,43,44,44,44,45,45,45,46,46,46,47,47,47,48,48,48,49,49,49,50,50,50,51,51,51,52,52,52,53,53,53,54,54,54,55,55,55,56,56,56,57,57,57,58,58,58,59,59,59,60,60,60,61,61,61,62,62,62,63,63,63,64,64,64,65,65,65,66,66,66,67,67,67,68,68,68,69,69,69,70,70,70,71,71,71,72,72,72,73,73,73,74,74,74,75,75,75,76,76,76,77,77,77,78,78,78,79,79,79,80,80,80,81,81,81,82,82,82,83,83,83,84,84,84],[1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4,1,3,4],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>client_id<\\/th>\\n      <th>seller_id<\\/th>\\n      <th>solution<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,2,3]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"client_id\",\"targets\":1},{\"name\":\"seller_id\",\"targets\":2},{\"name\":\"solution\",\"targets\":3}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n## Constrain capacity\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  group_by(seller_id) %>% \n  summarise(num_clients = sum(solution)) %>% \n  DT::datatable(filter = 'top')\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-1fb028d0b2d2e9452adc\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-1fb028d0b2d2e9452adc\">{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"4\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"10\\\" data-max=\\\"13\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"data\":[[\"1\",\"2\",\"3\"],[1,3,4],[10,10,13]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>seller_id<\\/th>\\n      <th>num_clients<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,2]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"seller_id\",\"targets\":1},{\"name\":\"num_clients\",\"targets\":2}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n## Constrain assign \n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  group_by(client_id) %>% \n  summarise(num_commercials = sum(solution)) %>% \n  DT::datatable(filter = 'top')\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-f626b9322e4a2b521d82\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f626b9322e4a2b521d82\">{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"84\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0\\\" data-max=\\\"1\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"60\",\"61\",\"62\",\"63\",\"64\",\"65\",\"66\",\"67\",\"68\",\"69\",\"70\",\"71\",\"72\",\"73\",\"74\",\"75\",\"76\",\"77\",\"78\",\"79\",\"80\",\"81\",\"82\",\"83\",\"84\"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],[0,0,1,0,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,1,1,0,0,1,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,1,0,0,0,0,1,0,1,0,1,0,1,1,1,0,0,0,0,1,0,1,0,1,0,1,1]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>client_id<\\/th>\\n      <th>num_commercials<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,2]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"client_id\",\"targets\":1},{\"name\":\"num_commercials\",\"targets\":2}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n:::\n\nThanks for reading, Hope this would be helpfull for you or your organization.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/datatables-binding-0.33/datatables.js\"></script>\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/nouislider-7.0.10/jquery.nouislider.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/nouislider-7.0.10/jquery.nouislider.min.js\"></script>\n<link href=\"../../site_libs/selectize-0.12.0/selectize.bootstrap3.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/selectize-0.12.0/selectize.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}